**东方通API网关软件**

**TongGW V2.0技术指标**

**文档编号：

| **编写部门** | 数据产品部 | **编制人员** |        |
| ------------ | ---------- | ------------ | ------ |
| **审核人员** |            | **批准人员** |        |
| **发布日期** | 2023．12   | **发布范围** | 通软件 |
| **版本**     | V2.0       | **文件密级** | 内部   |

| **类别**                                                     | **技术指标**                                                 |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 产品成熟度                                                   | 根据国家有关部门相关政策、本系统建设的技术需求以及信息安全性要求，要求投标产品应具有国内自主知识产权，并提供产品软件著作权证书。 |
| 跨平台支持                                                   | 为适应国产化趋势，要求投标产品WEB端管理中心、运行时必须全面支持国产CPU和国产操作系统，必须提供第三方（非厂商）证明材料。 |
| 云环境适配                                                   | 随着云计算和微服务的不断普及，要求投标产品支持容器化部署，同时支持本地和K8S环境部署，支持基于云环境的弹性伸缩能力。 |
| 产品架构                                                     | 产品采用轻量级的微服务架构，支持插件机制，通过插件的方式为API提供灵活的扩展能力。插件变更时无需重新部署API。 |
| API全生命周期管理                                            | 支持API注册、发布、变更、撤销、历史版本切换、在线测试、API导入、导出功能。 |
| 提供API目录，支持消费者订阅API和API订阅审批流程。            |                                                              |
| API变更通知，当API发生变化时可以通过微信，企业微信，邮件，短信和钉钉机器人的方式通知订阅API的用户。 |                                                              |
| 级联功能                                                     | 支持API跨节点的级联功能，支持API的跨节点的注册和订阅发布，支持API发布到其他节点供用户订阅，并通过本节点调用其他节点发布的API。 |
| 路由                                                         | 支持API动态配置管理，根据配置的路由将请求匹配到后端服务，支持API路径的全量匹配和前缀匹配。 |
| 支持多协议类型，包括HTTP/HTTPS,Restful，SOAP,gRPC,Dubbo,Websocket的路由转发。 |                                                              |
| 支持API的协议转换，支持Soap转Restful协议，gRPC转Restful协议，Dubbo转Restful协议。 |                                                              |
| 支持动态路由策略，根据配置的策略将API请求路由的不同的后端服务 |                                                              |
| 后端服务                                                     | 支持后端服务管理，当后端服务发生变更时，无需重新部署相应的API即可生效。支持多种服务类型，包括HTTP服务，Restful服务，Soap服务，gRPC服务，Websocket服务以及Dubbo服务。 |
| 支持后端服务的负载均衡调度管理，支持请求流量从网关到服务提供方按负载均衡规则进行分发，支持多种分发策略，包括基于header，基于源IP，基于会话的一致性哈希负载分发，以及轮询策略。 |                                                              |
| 支持后端服务认证，支持多种认证方式，包括Basic认证，JWT认证，Oauth认证和Token认证方式。 |                                                              |
| 支持后端集群服务的主动和被动健康检查，当后端服务异常时，将不再将请求转发给此地址，而将请求转发给其他正常的地址。当后端服务恢复正常后将重新将请求转发。 |                                                              |
| 支持请求流量转移和分流功能，支持流量根据权重分配到不同的后端服务。 |                                                              |
| 支持请求重试功能，针对不同类型的条件进行重试以及设置重试次数。 |                                                              |
| 支持https的后端服务调用，支持客户端和服务器的SSL单项和双向验证。支持http到https的协议转换。 |                                                              |
| 身份认证                                                     | 支持OAuth2.0身份认证服务，保证授权用户才能访问相应的服务。提供对接外部认证接口，支持包括Basic Authentication， OAuth 2.0，JWT，Authorization Bearer等 |
| 熔断限流                                                     | 支持服务请求熔断功能，支持最大连接数，最大重试次数等的熔断策略。 |
| 支持服务请求的速率限制功能，支持单位秒，分，小时等的服务调用次数和调用流量的限制。 |                                                              |
| 安全                                                         | 支持API的请求参数校验，校验成功后方可通行。阻断对后端服务的无效访问。 |
| 支持请求和响应数据的加解密，支持对称和非对称加解密，包括AES-256，AES-128，SM4国密以及RSA非对称加密算法。支持HTTP的数据签名和验证，保证数据的不可篡改性 |                                                              |
| 黑白名单配置，能够控制客户端访问的黑白名单；支持控制API的访问时间段控制。 |                                                              |
| API支持WAF安全防护，包括防SQL注入，防XSS攻击，支持全局配置和单个API配置。 |                                                              |
| 数据处理                                                     | 支持API请求的二次配置，包括对API请求头和API响应头，以及查询参数进行增加和删除操作。 |
| 支持请求和响应数据映射，支持一对一，多对一，一对多数据映射功能，提供多种转换方式，包括追加，首字母大写，计算字符串长度，替换字符串，字符串小写，字符串大写等转换方式。 |                                                              |
| 支持数据格式转换，包括XML-JSON，JSON-XML的数据格式转换       |                                                              |
| 告警                                                         | 为满足告警需求，要求产品支持告警规则管理，提供事件告警和自定义阈值告警两种告警方式。支持基于响应时间、请求数、失败数、验证错误数等监控项的阈值告警。 |
| 为满足业务需求，要求产品必须支持多种告警通知渠道，包括站内、微信、企业微信、短信、邮件、钉钉机器人和webhook调用。支持不同告警指定不同接收人。 |                                                              |
| 监控统计                                                     | API响应时间、调用次数、成功率、流量、响应码分布等多种维度监控；  支持查看API调用明细，包括详细入参信息和返回结果等； |
| 从应用的维度统计其调用情况，包括调用API的明细和总体调用监控统计等； |                                                              |
| 从组织，分类，API多角度统计API使用情况，提供按日，周，月的统计报表，支持报表导出。 |                                                              |
| 链路跟踪                                                     | 支持API的链路跟踪，记录API请求的详细日志，并根据需要进行开启和关闭。日志存储支持数据库和ES两种存储方式。 |
| 集群管理                                                     | 支持网关运行时的集群管理和部署，可以将不同的API可以分别部署在不同的集群上。 |
| 易用性                                                       | 提供可视化的插件管理，支持API请求和响应上绑定多个不同的插件。同时支持相同API的不同路径下绑定不同的插件。 |
| 提供可视化的数据映射功能，支持一对一，一对多，多对一数据映射，支持多种数据格式转换配置。 |                                                              |
| 高性能                                                       | 系统采用高性能的C++语言开发，1k数据时，吞吐量达到40000/s     |
